<div class="admin-dashboard">
  <!-- Header with user info and logout -->
  <div class="top-bar">
    <span class="user-email">{{ userEmail }}</span>
    <button class="btn-logout" (click)="logout()">Cerrar SesiÃ³n</button>
  </div>

  <div class="dashboard-header">
    <h1>ğŸ“Š Panel de AdministraciÃ³n</h1>
    <p>Vista general del sistema</p>
  </div>

  <!-- Loading State -->
  <div *ngIf="loading" class="loading-container">
    <div class="spinner"></div>
    <p>Cargando estadÃ­sticas...</p>
  </div>

  <!-- Statistics Grid -->
  <div *ngIf="!loading" class="stats-grid">
    <!-- Total Users Card -->
    <div class="stat-card users-card" (click)="navigateToUsers()">
      <div class="stat-icon">ğŸ‘¥</div>
      <div class="stat-content">
        <h3>Total Usuarios</h3>
        <p class="stat-number">{{ stats.totalUsers }}</p>
        <p class="stat-detail">{{ stats.activeUsers }} activos</p>
      </div>
    </div>

    <!-- Total Pagos Card -->
    <div class="stat-card pagos-card" (click)="navigateToAllPagos()">
      <div class="stat-icon">ğŸ’³</div>
      <div class="stat-content">
        <h3>Total Pagos</h3>
        <p class="stat-number">{{ stats.totalPagos }}</p>
        <p class="stat-detail">{{ stats.completedPagos }} completados</p>
      </div>
    </div>

    <!-- Total Amount Card -->
    <div class="stat-card amount-card">
      <div class="stat-icon">ğŸ’°</div>
      <div class="stat-content">
        <h3>Monto Total</h3>
        <p class="stat-number">S/ {{ stats.totalAmount | number:'1.2-2' }}</p>
        <p class="stat-detail">Promedio: S/ {{ stats.averageAmount | number:'1.2-2' }}</p>
      </div>
    </div>

    <!-- Pending Pagos Card -->
    <div class="stat-card pending-card">
      <div class="stat-icon">â³</div>
      <div class="stat-content">
        <h3>Pagos Pendientes</h3>
        <p class="stat-number">{{ stats.pendingPagos }}</p>
        <p class="stat-detail">Requieren atenciÃ³n</p>
      </div>
    </div>
  </div>

  <!-- Quick Actions -->
  <div class="quick-actions">
    <h2>Acciones RÃ¡pidas</h2>
    <div class="actions-grid">
      <button class="action-btn" (click)="navigateToUsers()">
        <span class="action-icon">ğŸ‘¤</span>
        <span class="action-text">Gestionar Usuarios</span>
      </button>
      <button class="action-btn" (click)="navigateToClientFiles()">
        <span class="action-icon">ğŸ“</span>
        <span class="action-text">Archivos de Clientes</span>
      </button>
      <button class="action-btn" (click)="navigateToAllPagos()">
        <span class="action-icon">ğŸ“‹</span>
        <span class="action-text">Ver Todos los Pagos</span>
      </button>
      <button class="action-btn" (click)="navigateToStats()">
        <span class="action-icon">ğŸ“ˆ</span>
        <span class="action-text">EstadÃ­sticas Detalladas</span>
      </button>
      <button class="action-btn" (click)="navigateToCategories()">
        <span class="action-icon">ğŸ·ï¸</span>
        <span class="action-text">Gestionar CategorÃ­as</span>
      </button>
    </div>
  </div>

  <!-- Recent Users -->
  <div class="recent-section">
    <h2>Usuarios Recientes</h2>
    <div class="users-list">
      <div *ngFor="let user of recentUsers" class="user-item">
        <div class="user-avatar">
          {{ user.email.charAt(0).toUpperCase() }}
        </div>
        <div class="user-info">
          <p class="user-email">{{ user.email }}</p>
          <p class="user-role">
            <span [class]="'role-badge ' + user.role">
              {{ user.role === 'admin' ? 'ğŸ‘©â€ğŸ’¼ Administrador' : 'ğŸ‘¤ Cliente' }}
            </span>
          </p>
        </div>
        <div class="user-status">
          <span [class]="'status-badge ' + (user.isActive ? 'active' : 'inactive')">
            {{ user.isActive ? 'âœ“ Activo' : 'âœ— Inactivo' }}
          </span>
        </div>
      </div>
      <div *ngIf="recentUsers.length === 0" class="empty-state">
        <p>No hay usuarios registrados</p>
      </div>
    </div>
  </div>
</div>